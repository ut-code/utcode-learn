---
title: オブジェクト
---

## オブジェクト

JavaScriptで利用することができる<Term>値</Term>の種類として、これまで<Term>数値</Term>と<Term>文字列</Term>、<Term>論理値</Term>を扱いました。<Term>数値</Term>や<Term>文字列</Term>、<Term>論理値</Term>などの「それ以上分解できない」<Term>値</Term>のことを**プリミティブ**と呼びます。JavaScriptには、この他にも、**オブジェクト**と呼ばれる<Term>値</Term>が存在します。JavaScriptにおいて、<Term>プリミティブ</Term>でない<Term>値</Term>はすべてオブジェクトです。

![値の種類](./value-types-with-object.drawio.svg)

オブジェクトを用いると、関連する<Term>値</Term>をまとめて1つの<Term>値</Term>として扱うことができます。これにより、事物をプログラム上でより現実世界に近い形で表現することができます。

例として、学生の情報をJavaScriptの値として扱う方法を考えてみましょう。1人の学生は、名前、年齢、メールアドレスという3つの情報から構成されるとします。オブジェクトを使用しない場合、次のように3つの値に分けて管理することになるでしょう。

```javascript
const studentName = "山田太郎";
const studentAge = 15;
const studentEmail = "yamada.taro@example.com";
```

これでは、3つの情報の関連性が分かりづらいだけでなく、配列の要素や関数の引数などとして使用するたびに同様の記述を繰り返すことになり、冗長です。オブジェクトにより3つの値を1つの値としてまとめて扱うと、このようなプログラムの見通しを良くすることができます。

## オブジェクトの作成

オブジェクトは、次のようにして作成します。

```javascript
const student = {
  name: "山田太郎",
  age: 15,
  email: "yamada.taro@example.com",
};
```

オブジェクトを構成する情報を<Term type="javascriptProperty">**プロパティ**</Term>と呼び、**プロパティ名**と**プロパティ値**の組で表されます。この例では、`name`や`age`、`email`が<Term>プロパティ名</Term>であり、`"山田太郎"`や`15`、`"yamada.taro@example.com"`が<Term>プロパティ値</Term>です。<Term>プロパティ名</Term>には文字列しか指定できませんが、<Term>プロパティ値</Term>には、JavaScriptで使用できるすべての<Term>値</Term>が指定可能です。

| プロパティ名 | プロパティ値                |
| ------------ | --------------------------- |
| `name`       | `"山田太郎"`                |
| `age`        | `15`                        |
| `email`      | `"yamada.taro@example.com"` |

:::tip[ほかの言語の経験者へ]

JavaScriptのオブジェクトは、ほかの言語でいう辞書や連想配列、Mapに近いものです。ただ、こういったものと比べ、JavaScriptのオブジェクトは使用頻度が非常に高いです。

:::

### 確認問題

次のような情報を持つユーザーを表すオブジェクト`user`を作成してください。

- `name`: `"山田花子"`
- `bio`: `"プログラミングを勉強しています。"`

<Answer>

```javascript
const user = {
  name: "山田花子",
  bio: "プログラミングを勉強しています。",
};
```

<ViewSource url={import.meta.url} path="_samples/create-user-object" />

</Answer>

## プロパティの取得

オブジェクトの<Term>プロパティ</Term>を取得するには、次のようにドット記号（`.`）を使います。

```javascript
document.write(student.name); // 山田太郎
document.write(student.age); // 15
```

## プロパティの変更

オブジェクトの<Term>プロパティ</Term>を変更するには、次のようにします。

```javascript
document.write(student.email); // yamada.taro@example.com
student.email = "yamada.taro@example.jp";
document.write(student.email); // yamada.taro@example.jp
```

### 確認問題

次のようなユーザーを表すオブジェクト`user`があります。ユーザーのプロフィールを表示し、プロフィールの内容を`"JavaScriptでWebアプリを作っています。"`に変更してから、もう一度表示してください。

```javascript
const user = {
  name: "山田花子",
  bio: "プログラミングを勉強しています。",
};
```

<Answer>

```javascript
document.write(user.bio); // プログラミングを勉強しています。
user.bio = "JavaScriptでWebアプリを作っています。";
document.write(user.bio); // JavaScriptでWebアプリを作っています。
```

<ViewSource url={import.meta.url} path="_samples/change-bio-property" />

</Answer>

## オブジェクトのネスト

さきほど<Term>プロパティ値</Term>には、すべての<Term>値</Term>が指定可能であると説明しました。オブジェクトも<Term>値</Term>の一種であるため、次のようにオブジェクトの<Term>プロパティ値</Term>にオブジェクトを指定する（<Term>ネスト</Term>する）こともできます。

```javascript
const student = {
  name: "山田太郎",
  age: 15,
  email: "yamada.taro@example.com",
  scores: {
    japanese: 90,
    math: 70,
    english: 80,
  },
};
```

{/* prettier-ignore */}
<Term>ネスト</Term>されたオブジェクトの<Term>プロパティ</Term>は、次のようにして取得、変更できます。

```javascript
document.write(student.scores.math); // 70
student.scores.math = 100;
document.write(student.scores.math); // 100
```

### 確認問題

次のようなユーザーを表すオブジェクト`user`があります。言語設定を変更することになりました。言語設定を表示し、`"English"`に変更してから、もう一度表示してください。

```javascript
const user = {
  name: "山田花子",
  bio: "JavaScriptでWebアプリを作っています。",
  settings: {
    isNotificationsEnabled: true,
    language: "日本語",
  },
};
```

<Answer>

```javascript
document.write(user.settings.language); // 日本語
user.settings.language = "English";
document.write(user.settings.language); // English
```

<ViewSource url={import.meta.url} path="_samples/change-language-property" />

</Answer>

## 配列とオブジェクト

さきほどJavaScriptにおいて<Term>プリミティブ</Term>でない<Term>値</Term>はすべてオブジェクトであると説明しました。<Term>配列</Term>はプリミティブではないので、オブジェクトの一種です。

![値の種類](./value-types-with-array.drawio.svg)

JavaScriptのオブジェクトは、<Term>プロパティ名</Term>と<Term>プロパティ値</Term>の組によって構成されているのでした。JavaScriptでは、<Term>配列</Term>も、各要素のインデックスが<Term>プロパティ名</Term>になっているオブジェクトだとみなすことができます。

![配列のプロパティ](./array-properties.png)

逆に、オブジェクトも<Term>配列</Term>と同じように使用することができます。この記法をブラケット記法と呼び、プログラムの動作に応じて使用したい<Term>プロパティ</Term>を切り替えるのに役立ちます。

```javascript
const subject = "english"; // ここを変えると表示される教科が変わる。
const scores = {
  japanese: 90,
  math: 70,
  english: 80,
};
document.write(`${subject}の点数は${scores[subject]}点です。`); // englishの点数は80点です。
```

:::tip[オブジェクトのプロパティ名]

オブジェクトの<Term>プロパティ名</Term>に<Term>数値</Term>は使用できません。それではなぜ、<Term>配列</Term>の場合は`studentNames[0]`のようにプロパティ名に<Term>数値</Term>を使用できるのでしょうか。

答えは単純で、<Term>数値</Term>が<Term>文字列</Term>に変換されているためです。そのため、`studentNames[0]`は`studentNames["0"]`と同じ意味になります。

```javascript
const studentNames = ["田中", "佐藤", "鈴木"];
document.write(studentNames["0"]); // 田中
```

:::

## 初級演習

### テストの平均点

次のような学生を表すオブジェクトがあります。この学生の国語と算数、英語の3教科の平均点を計算して、表示してください。

```javascript
const student = {
  name: "山田太郎",
  age: 15,
  email: "yamada.taro@example.com",
  scores: {
    japanese: 90,
    math: 70,
    english: 80,
  },
};
```

<Answer>

```javascript
const averageScore =
  (student.scores.japanese + student.scores.math + student.scores.english) / 3;
document.write(`平均点は${averageScore}点です。`);
```

<ViewSource url={import.meta.url} path="_samples/average-score" />

</Answer>

## 中級演習

### 点群を囲む長方形

平面上の点は、プロパティ`x`と`y`を持つオブジェクトとして表現することができます。また、平面上の長方形は、左上の点`topLeft`と右下の点`bottomRight`をプロパティに持つオブジェクトとして表現することができます。平面上の点群を表すオブジェクトの配列から、その点群を囲む最小の長方形を求める関数`getBoundingRectangle`を実装してください。

```javascript
function getBoundingRectangle(points) {
  // ここに関数を実装してください
}
```

この関数は、次のようにして使用します。

```javascript
// 建物の場所
const buildingLocations = [
  { x: 2, y: 1 },
  { x: -1, y: 4 },
  { x: -2, y: -1 },
];
// 全ての建物が収まる地図を表す長方形
// { topLeft: { x: -2, y: -1 }, bottomRight: { x: 2, y: 4 } }
const mapRectangle = getBoundingRectangle(buildingLocations);
document.write(
  `地図の左上の点は(${mapRectangle.topLeft.x}, ${mapRectangle.topLeft.y})で、右下の点は(${mapRectangle.bottomRight.x}, ${mapRectangle.bottomRight.y})です。`,
);
```

:::note[ヒント]

各点の`x`座標と`y`座標の最小値と最大値を求めることで、長方形の左上の点と右下の点を求めることができます。

:::

<Answer>

```javascript
function getBoundingRectangle(points) {
  const rectangle = {
    topLeft: {
      x: points[0].x,
      y: points[0].y,
    },
    bottomRight: {
      x: points[0].x,
      y: points[0].y,
    },
  };
  for (const point of points) {
    if (point.x < rectangle.topLeft.x) {
      rectangle.topLeft.x = point.x;
    }
    if (point.y < rectangle.topLeft.y) {
      rectangle.topLeft.y = point.y;
    }
    if (point.x > rectangle.bottomRight.x) {
      rectangle.bottomRight.x = point.x;
    }
    if (point.y > rectangle.bottomRight.y) {
      rectangle.bottomRight.y = point.y;
    }
  }
  return rectangle;
}
```

<ViewSource url={import.meta.url} path="_samples/bounding-rectangle" />

</Answer>
