---
title: クラスとオブジェクト指向
---

:::info
この記事では、まだJavaScriptの標準仕様には含まれていない[パブリックフィールド宣言](https://github.com/tc39/proposal-class-fields)を使用しています。ChromeとFirefoxでは動作しますが、Safariでは動作しないかもしれません。
:::

多くのプログラミング言語が、**オブジェクト指向**という考え方を持っています。オブジェクト指向とは、「データと動作を一つのまとまりとして捉える考え方」です。

オブジェクト指向におけるこのまとまりを、**クラス**と呼びます。クラスに含まれるデータが**フィールド**、動作が**メソッド**です。

クラスを使うためには、**定義**をしなければなりません。クラスの定義とは、そのクラスがどのようなフィールドやメソッドを持つかを示す、設計図のようなものです。

```js
class Dog {
  age;
  name;
  bark() {
    if (this.age > 5) {
      console.log('バウバウ');
    } else {
      console.log('ワンワン');
    }
  }
}
```

JavaScriptにおいてクラスを定義するためには、`class`構文を用います。上の例で示した`Dog`クラスの定義は、現実世界の犬を表す設計図です。犬を表すためのデータには、例えば「年齢」や「名前」があります。これが`age`フィールドや`name`フィールドです。

犬に関わる動作には、例えば「吠える」などがあります。`bark`メソッドとしてみましょう。メソッドの中の`this`キーワードは、設計図から生まれた実体を表します。

```js
const pochi = new Dog();
pochi.name = 'ポチ';
pochi.age = 8;
pochi.bark();
```

`Dog`の定義から実体（**インスタンス**）を作り出すためには、`new`キーワードを用います。インスタンスは通常のJavaScriptオブジェクトと同様の形式なので、ドット記法またはブラケット記法によりフィールドやメソッドにアクセスできます。

`pochi.bark();`を実行した際、`bark`メソッド内で得られる`this`は`pochi`そのものです。この仕組みにより、クラス定義は、全てのインスタンスで共通する動作を問題なく抽象化できます。

なお、これ以降、クラスのメソッドは`#`記号を用いて表すこととします。例えば、`Dog`クラスの`bark`メソッドは`Dog#bark`メソッドと表記します。

## コンストラクタ

コンストラクタは、`new`演算子が使用された際に呼び出される関数です。`JavaScript`では、`constructor`という名前のメソッドを定義することで使用することができます。

```js
class Dog {
  age;
  constructor(age) {
    this.age = age;
  }
}

const pochi = new Dog(8);
console.log(pochi.age); // 8
```

コンストラクタは、他の関数と同じように、引数を取ることができます。通常、コンストラクタに渡される値は、フィールドの初期化などに用いられます。

## コンストラクタを使用する

JavaScriptには、日時を表すための`Date`クラスが用意されています。`Date`クラスのコンストラクタは、例えば文字列引数1つにより呼び出すことができ、その文字列を日付として解釈しようと試みます。`Date`クラスには、日時を扱うための様々な便利メソッドが用意されています。

```js
const valentinesDay = new Date('2020-02-14 00:00:00');
console.log(valentinesDay.getDate()); // 14
```

例えば、`Date#getDate`メソッドは、その日の日付を返すメソッドです。

## 課題

`Dog`クラスに、`私の名前は〜です。`（〜の部分に`name`プロパティを埋め込む）とコンソールに出力する`introduceSelf`メソッドを追加してください。実際に`introduceSelf`メソッドを実行させ、正常に動作することを確認してください。
